[{"content":"æ‡’åŠ è½½ æ‡’åŠ è½½ä¹Ÿå«å»¶è¿ŸåŠ è½½ï¼Œå»¶è¿ŸåŠ è½½è¿™ä¸€è§£å†³æ–¹æ¡ˆå¯ä»¥å‡å°‘åˆå§‹ç½‘é¡µè½½è·å’ŒåŠ è½½æ—¶é—´ã€‚\næˆ‘ä»¬é€šå¸¸ä¼šå»¶è¿ŸåŠ è½½ éå…³é”®èµ„æºï¼Œåœ¨éœ€è¦çš„æ—¶å€™å†åŠ è½½è¿™äº›éå…³é”®èµ„æºã€‚å°±å›¾ç‰‡æ¥è¯´ï¼Œâ€œéå…³é”®â€é€šå¸¸æŒ‡çš„æ˜¯â€œå±å¹•å¤–â€ã€‚\nä¸ºä½•è¦å»¶è¿ŸåŠ è½½å›¾ç‰‡æˆ–è§†é¢‘ï¼Ÿ å‡å°‘åˆå§‹ç½‘é¡µåŠ è½½æ—¶é—´ã€åˆå§‹é¡µé¢é‡é‡ä»¥åŠç³»ç»Ÿèµ„æºç”¨é‡ã€‚ ç”¨æˆ·å¯èƒ½æ°¸è¿œä¸æŸ¥çœ‹è¯¥å†…å®¹ï¼Œè¿™æ ·é¿å…æµªè´¹æµé‡ï¼Œè´¹å¤„ç†æ—¶é—´ã€ç”µé‡å’Œå…¶ä»–èµ„æºï¼ˆä¸‹è½½åª’ä½“èµ„æºåï¼Œæµè§ˆå™¨å¿…é¡»å¯¹å…¶è¿›è¡Œè§£ç ï¼Œå¹¶åœ¨è§†å£ä¸­å‘ˆç°å…¶å†…å®¹ï¼‰ã€‚ æ•ˆæœå¦‚ï¼š\nå»¶è¿ŸåŠ è½½å›¾ç‰‡ loading å±æ€§ Chrome å’Œ Firefox éƒ½æ”¯æŒé€šè¿‡ loading å±æ€§è¿›è¡Œå»¶è¿ŸåŠ è½½ã€‚\nå¯é€‰å€¼ï¼š\neager: ç«‹å³åŠ è½½å›¾åƒï¼Œä¸ç®¡å®ƒæ˜¯å¦åœ¨å¯è§†è§†å£ï¼ˆvisible viewportï¼‰ä¹‹å¤–ï¼ˆé»˜è®¤å€¼ï¼‰ lazy: å»¶è¿ŸåŠ è½½å›¾åƒï¼Œç›´åˆ°å®ƒå’Œè§†å£æ¥è¿‘åˆ°ä¸€ä¸ªè®¡ç®—å¾—åˆ°çš„è·ç¦»ï¼ˆç”±æµè§ˆå™¨å®šä¹‰ï¼‰ã€‚ç›®çš„æ˜¯åœ¨éœ€è¦å›¾åƒä¹‹å‰ï¼Œé¿å…åŠ è½½å›¾åƒæ‰€éœ€è¦çš„ç½‘ç»œå’Œå­˜å‚¨å¸¦å®½ã€‚ å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œç³»ç»Ÿä¼šå¿½ç•¥è¯¥å±æ€§ï¼Œå¹¶ç…§å¸¸ç«‹å³åŠ è½½å›¾ç‰‡ã€‚\nåˆ¤æ–­æ˜¯å¦æ”¯æŒ loading\nif (\u0026#39;loading\u0026#39; in HTMLImageElement.prototype) { // supported in browser } else { // fetch polyfill/third-party library } scroll æˆ– resize \u0026lt;body\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;https://img.zcool.cn/community/011e0e5c231dcaa80121df9063b03f.jpg@1280w_1l_2o_100sh.jpg\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/011e0e5c231dcaa80121df9063b03f.jpg@1280w_1l_2o_100sh.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/01427a5c63c7dba801213f26fa8f1f.jpg@1280w_1l_2o_100sh.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/0132fb60a7171011013f472074ee82.jpg@1280w_1l_2o_100sh.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://pic2.zhimg.com/v2-ac79ec66a08cdbbfd36c3f9e4f307077_1440w.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/01702360a7171511013e3b7d2249ef.jpg@1280w_1l_2o_100sh.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/01c9e05da91bcea8012163bae9a7ea.jpg@2o.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/010c155dcec2b0a8012053c0802a12.jpg@3000w_1l_0o_100sh.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://pic2.zhimg.com/v2-b2ab50d677e6f8a9101dae446dd99acd_r.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.3dmgame.com/uploads/images/thumbpicfirst/20180824/1535099402_352803.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; class=\u0026#39;img-item\u0026#39; src=\u0026#34;\u0026#34; data-original=\u0026#34;https://img.zcool.cn/community/0193a55b9df41ba8012099c8aedcd0.jpg@3000w_1l_0o_100sh.jpg\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;script\u0026gt; // æ‹¿åˆ°å¯è§†è§‰åŒºåŸŸçš„é«˜åº¦ let viewHeight = document.documentElement.clientHeight; function lazyLoad(){ // æ‹¿åˆ°æ‰€æœ‰çš„imgå…ƒç´  let imgs = document.querySelectorAll(\u0026#39;img[data-original]\u0026#39;); imgs.forEach(el=\u0026gt;{ // getBoundingClientRect()ä¸“é—¨è·å–å®¹å™¨çš„å‡ ä½•ä¿¡æ¯ let rect = el.getBoundingClientRect() if(rect.top \u0026lt; viewHeight){ // imgå…ƒç´ è‡ªå¸¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå›¾ç‰‡å¯¹è±¡ let image = new Image() // jsä¸“æœ‰å†™æ³•dataset.original; = data-original image.src = el.dataset.original; image.onload = function(){ el.src = image.src } // å›¾ç‰‡åŠ è½½å®Œæ¯•å°±ç§»é™¤å±æ€§ el.removeAttribute(\u0026#39;data-original\u0026#39;) } }) } lazyLoad() // æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨ document.addEventListener(\u0026#39;scroll\u0026#39;,lazyLoad) \u0026lt;/script\u0026gt; Intersection Observer æ€§èƒ½æ›´ä½³ä¸”æ›´é«˜æ•ˆ\n\u0026lt;script\u0026gt; document.addEventListener(\u0026#34;DOMContentLoaded\u0026#34;, function() { var lazyImages = [].slice.call(document.querySelectorAll(\u0026#34;img.img-item\u0026#34;)); if (\u0026#34;IntersectionObserver\u0026#34; in window) { let lazyImageObserver = new IntersectionObserver(function(entries, observer) { entries.forEach(function(entry) { if (entry.isIntersecting) { let lazyImage = entry.target; lazyImage.src = lazyImage.dataset.original; // lazyImage.srcset = lazyImage.dataset.srcset; // lazyImage.classList.remove(\u0026#34;lazy\u0026#34;); lazyImageObserver.unobserve(lazyImage); } }); }); lazyImages.forEach(function(lazyImage) { lazyImageObserver.observe(lazyImage); }); } else { } \u0026lt;/script\u0026gt; æ€»ç»“ å¯ä»¥é€šè¿‡ loading å’Œ scroll æˆ– resize å’Œ Intersection Observer æ–¹å¼æ”¯æŒå»¶è¿ŸåŠ è½½ å»¶è¿ŸåŠ è½½å¯ä»¥å‡å°‘å¯åŠ¨æœŸé—´çš„æ€»ä½“æµé‡æ¶ˆè€—å’Œç½‘ç»œäº‰ç”¨ï¼Œå‡å°‘å›¾åƒè§£ç æ‰€éœ€çš„æ—¶é—´æ¥å‡å°‘ä¸»çº¿ç¨‹ä¸Šçš„å¤„ç†ã€‚ é¿å…å»¶è¿ŸåŠ è½½å¯è§†åŒºåŸŸå†…çš„ï¼Œä»¥å…å¯¹ lcp äº§ç”Ÿè´Ÿé¢å½±å“ ","permalink":"https://dummyEkko.github.io/posts/tech/lazyload/","summary":"æ‡’åŠ è½½ æ‡’åŠ è½½ä¹Ÿå«å»¶è¿ŸåŠ è½½ï¼Œå»¶è¿ŸåŠ è½½è¿™ä¸€è§£å†³æ–¹æ¡ˆå¯ä»¥å‡å°‘åˆå§‹ç½‘é¡µè½½è·å’ŒåŠ è½½æ—¶é—´ã€‚ æˆ‘ä»¬é€šå¸¸ä¼šå»¶è¿ŸåŠ è½½ éå…³é”®èµ„æºï¼Œåœ¨éœ€è¦çš„æ—¶å€™å†åŠ è½½è¿™äº›éå…³é”®èµ„æºã€‚å°±å›¾ç‰‡æ¥è¯´ï¼Œâ€œéå…³é”®â€é€šå¸¸æŒ‡çš„æ˜¯â€œå±å¹•å¤–â€ã€‚ ä¸ºä½•è¦å»¶è¿ŸåŠ è½½å›¾ç‰‡æˆ–è§†é¢‘ï¼Ÿ å‡å°‘åˆå§‹ç½‘é¡µåŠ è½½æ—¶é—´ã€åˆå§‹é¡µé¢é‡é‡ä»¥åŠç³»ç»Ÿèµ„æºç”¨é‡ã€‚ ç”¨æˆ·å¯èƒ½æ°¸è¿œä¸æŸ¥","title":"Lazyload"},{"content":"é™æ€æå‡ é™æ€èŠ‚ç‚¹æå‡ ç¼–è¯‘å™¨å°†æ¨¡æ¿ç¼–è¯‘æˆrenderå‡½æ•°çš„æ—¶å€™ï¼Œä¼šå‘ç°é™æ€èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œé™æ€æå‡ã€‚\né™æ€æå‡æ˜¯ä»¥æ ‘ä¸ºå•ä½\nä¾‹å¦‚ï¼š\n\u0026lt;div\u0026gt; \u0026lt;div\u0026gt;foo\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;{{ bar }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; å¯¹åº”çš„æ¸²æŸ“å‡½æ•°ï¼š\n// before function render() { return ( openBlock(), createBlock(\u0026#39;div\u0026#39;, null, [ createVNode(\u0026#39;p\u0026#39;, null, \u0026#39;foo\u0026#39;), createVNode(\u0026#39;p\u0026#39;, null, ctx.bar, 1 /*TEXT*/), ]) ) } // after // å°†çº¯é™æ€çš„ è™šæ‹ŸèŠ‚ç‚¹æå‡ const hosit1 = createVNode(\u0026#39;p\u0026#39;, null, \u0026#39;foo\u0026#39;) function render() { return ( openBlock(), createBlock(\u0026#39;div\u0026#39;, null, [ hosit1, // ä¼ é€’å¼•ç”¨ï¼Œè¿™æ ·æ¯æ¬¡renderæ—¶å€™ä¸ä¼šé‡æ–°ç”Ÿæˆ createVNode(\u0026#39;p\u0026#39;, null, ctx.bar, 1 /*TEXT*/), ]) ) } é™æ€å±æ€§æå‡ ä¾‹å¦‚ï¼š\n\u0026lt;div\u0026gt; \u0026lt;div foo=\u0026#34;bar\u0026#34; a=b\u0026gt;{{ text }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; å¯ä»¥å°†é™æ€å±æ€§æå‡\nconst hositProps = { foo: \u0026#39;bar\u0026#39;, a: \u0026#39;b\u0026#39; } function render() { return ( openBlock(), createBlock(\u0026#39;div\u0026#39;, null, [ createVNode(\u0026#39;div\u0026#39;, hositProps, ctx.text, 1 /*TEXT*/), ]) ) } é¢„å­—ç¬¦ä¸²åŒ– ä¾‹å¦‚ï¼š\n\u0026lt;div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;!-- ... 20ä¸ªpæ ‡ç­¾ --\u0026gt; \u0026lt;/div\u0026gt; æˆ‘ä»¬å°†é™æ€èŠ‚ç‚¹åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª static ç±»å‹çš„ vnode:\nconst hoistStatic = createStaticVNode(\u0026#39;\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;...20ä¸ª...\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026#39;) render() { return (openBlock(), createBlock(\u0026#39;div\u0026#39;, null, [hoistStatic])) } ä¼˜åŠ¿åœ¨äºï¼š\nå¤§å—çš„é™æ€å†…å®¹å¯ä»¥é€šè¿‡ innerHTML è¿›è¡Œè®¾ç½®ï¼Œæ€§èƒ½ä¸Šæœ‰ä¸€å®šä¼˜åŠ¿ å‡å°‘å†…å®¹å ç”¨ å‡å°‘è™šæ‹ŸèŠ‚ç‚¹ è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºäº§ç”Ÿçš„æ€§èƒ½å¼€é”€ ç¼“å­˜å†…è”äº‹ä»¶å¤„ç†å‡½æ•° ä¾‹å¦‚ï¼š\n\u0026lt;Comp @change=\u0026#34;a + b\u0026#34;/\u0026gt; ç¼–è¯‘å™¨ä¼šå°†å…¶ç¼–è¯‘ä¸ºï¼š\nfunction render() { return h(Comp, { onChange: () =\u0026gt; (ctx.a + ctx.b) // æ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šä¸ºç»„ä»¶åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ propså¯¹è±¡ã€‚åŒæ—¶propsä¸­çš„onChangeå±æ€§å€¼ä¹Ÿä¼šæ˜¯ä¸€ä¸ª // å…¨æ–°çš„å€¼ }) } // æˆ‘ä»¬å¢åŠ ç¼“å­˜è¿›è¡Œä¼˜åŒ– function render() { return h(Comp, { onChange: cache[0] || (cache[0] = ($event) =\u0026gt; (ctx.a + ctx.b)) // å…¨æ–°çš„å€¼ }) } PatchFlag \u0026amp; block é¶å‘æ›´æ–°å’Œblockæ ‘\nä¾‹å¦‚æ¨¡æ¿ï¼š\n\u0026lt;div\u0026gt; \u0026lt;div\u0026gt;foo\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;{{ bar }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ç¼–è¯‘æˆä¼ ç»Ÿçš„è™šæ‹Ÿdomï¼š\nconst vnode = { tag: \u0026#39;div\u0026#39;, children: [ { tag: \u0026#39;p\u0026#39;, children: \u0026#39;foo\u0026#39;}, { tag: \u0026#39;p\u0026#39;, children: ctx.bar }, ] } ç¼–è¯‘ä¼˜åŒ–åï¼Œç¼–è¯‘å™¨ä¼šå°†æå–åˆ°ä»–çš„å…³é”®ä¿¡æ¯é™„ç€åœ¨vnodeä¸Šï¼š\n// åªè¦å­˜åœ¨ `patchFlag` æˆ‘ä»¬ç§°ä¸ºåŠ¨æ€èŠ‚ç‚¹ã€‚ const PatchFlags = { TEXT: 1, // è¡¨ç¤ºåŠ¨æ€æ–‡æœ¬å†…å®¹ CLASS: 2, // è¡¨ç¤ºåŠ¨æ€çš„ class STYLE: 3, // è¡¨ç¤ºåŠ¨æ€çš„ style PROPS: 4 // è¡¨ç¤ºåŠ¨æ€çš„ props // çœç•¥... } const vnode = { tag: \u0026#39;div\u0026#39;, children: [ { tag: \u0026#39;p\u0026#39;, children: \u0026#39;foo\u0026#39;}, { tag: \u0026#39;p\u0026#39;, children: ctx.bar, patchFlag: PatchFlags.TEXT }, // è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€èŠ‚ç‚¹ ] } æœ‰äº†è¿™é¡¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŠ¨æ€å­èŠ‚ç‚¹æå‡ºæ¥ï¼Œå­˜å‚¨åˆ°è¯¥è™šæ‹ŸèŠ‚ç‚¹çš„ dynamicChildren:\nconst vnode = { tag: \u0026#39;div\u0026#39;, children: [ { tag: \u0026#39;p\u0026#39;, children: \u0026#39;foo\u0026#39;}, { tag: \u0026#39;p\u0026#39;, children: ctx.bar, patchFlag: PatchFlags.TEXT }, // è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€èŠ‚ç‚¹ ], // children ä¸­çš„åŠ¨æ€èŠ‚ç‚¹è¢«æå–åˆ°è¿™é‡Œ dynamicChildren: [ { tag: \u0026#39;p\u0026#39;, children: ctx.bar, patchFlag: PatchFlags.TEXT }, // è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€èŠ‚ç‚¹ ] } æˆ‘ä»¬å°†å¸¦æœ‰ dynamicChildren çš„è™šæ‹ŸèŠ‚ç‚¹ç§°ä¸º blockï¼ˆå—ï¼‰\næœ‰äº† block æ¦‚å¿µåï¼Œæ¸²æŸ“å™¨æ›´æ–°æ“ä½œå°†ä¼šä»¥ block ä¸ºç»´åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ¸²æŸ“å™¨åœ¨æ›´æ–°ä¸€ä¸ª block æ—¶ï¼Œä¼šå¿½ç•¥è™šæ‹ŸèŠ‚ç‚¹çš„ childrenï¼Œè€Œæ˜¯ ç›´æ¥æ‰¾åˆ° dynamicChildren æ•°ç»„ï¼Œå¹¶ä¸”åªæ›´æ–°æ•°ç»„ä¸­çš„åŠ¨æ€èŠ‚ç‚¹ï¼Œä»è€Œè·³è¿‡é™æ€å†…å®¹ï¼Œåªæ›´æ–°åŠ¨æ€å†…å®¹ã€‚åŒæ—¶ï¼Œç”±äºåŠ¨æ€èŠ‚ç‚¹ä¸­å­˜åœ¨è¡¥ä¸æ ‡å¿—(PatchFlags), æ‰€ä»¥åªéœ€è¦é¶å‘æ›´æ–°ã€‚\nä»€ä¹ˆèŠ‚ç‚¹ä¼šç§°ä¸º block èŠ‚ç‚¹ï¼Ÿ\næ‰€æœ‰æ¨¡æ¿çš„æ ¹èŠ‚ç‚¹ å¸¦æœ‰ v-ifã€v-forã€v-else-if ","permalink":"https://dummyEkko.github.io/posts/tech/vue3%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96/","summary":"é™æ€æå‡ é™æ€èŠ‚ç‚¹æå‡ ç¼–è¯‘å™¨å°†æ¨¡æ¿ç¼–è¯‘æˆrenderå‡½æ•°çš„æ—¶å€™ï¼Œä¼šå‘ç°é™æ€èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œé™æ€æå‡ã€‚ é™æ€æå‡æ˜¯ä»¥æ ‘ä¸ºå•ä½ ä¾‹å¦‚ï¼š \u0026lt;div\u0026gt; \u0026lt;div\u0026gt;foo\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;{{ bar }}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; å¯¹åº”çš„æ¸²æŸ“å‡½æ•°ï¼š // before function render() { return ( openBlock(), createBlock(\u0026#39;div\u0026#39;, null, [ createVNode(\u0026#39;p\u0026#39;, null, \u0026#39;foo\u0026#39;), createVNode(\u0026#39;p\u0026#39;, null, ctx.bar, 1 /*TEXT*/), ]) ) } // after // å°†çº¯é™æ€çš„ è™šæ‹ŸèŠ‚ç‚¹æå‡ const hosit1 = createVNode(\u0026#39;p\u0026#39;, null, \u0026#39;foo\u0026#39;) function render() { return ( openBlock(), createBlock(\u0026#39;div\u0026#39;, null, [ hosit1, // ä¼ é€’å¼•ç”¨ï¼Œè¿™æ ·æ¯æ¬¡ren","title":"Vue3ç¼–è¯‘ä¼˜åŒ–"},{"content":"å­—ä½“åŠ è½½ @font-face @font-face ç”¨æ¥ç”³æ˜ç½‘ç»œå­—ä½“ï¼Œå®ƒè‡³å°‘è¦å£°æ˜å°†ç”¨äºå¼•ç”¨å­—ä½“çš„åç§°ï¼Œå¹¶æŒ‡æ˜ç›¸åº”å­—ä½“æ–‡ä»¶çš„ä½ç½®ã€‚\n@font-face { font-family: \u0026#34;Open Sans\u0026#34;; src: url(\u0026#34;/fonts/OpenSans-Regular-webfont.woff2\u0026#34;) format(\u0026#34;woff2\u0026#34;); } h1 { /* è¿™ä¸ªæ—¶å€™æ‰ä¼šå»ä¸‹è½½ font-face å£°æ˜çš„å­—ä½“ */ font-family: \u0026#34;Open Sans\u0026#34; } @font-face å£°æ˜æœ¬èº«ä¸ä¼šè§¦å‘å­—ä½“ä¸‹è½½, åªæœ‰é€šè¿‡åœ¨ç½‘é¡µä¸Šä½¿ç”¨çš„æ ·å¼å¼•ç”¨æŸä¸ªå­—ä½“æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šä¸‹è½½è¯¥å­—ä½“\nunicode-range ä½¿ç”¨ä»‹ç»ï¼š\ntodo\nå­—ä½“æ¸²æŸ“ å½“é¢ä¸´å°šæœªåŠ è½½çš„ç½‘ç»œå­—ä½“æ—¶ï¼Œæµè§ˆå™¨å°†é¢ä¸´ä¸€ä¸ªå›°å¢ƒï¼šæ˜¯å¦åº”è¯¥åœ¨ç½‘ç»œå­—ä½“åˆ°è¾¾ä¹‹å‰æš‚åœæ¸²æŸ“æ–‡æœ¬ï¼Ÿè¿˜æ˜¯åº”è¯¥åœ¨ç½‘é¡µå­—ä½“åˆ°è¾¾ä¹‹å‰ä»¥åå¤‡å­—ä½“å‘ˆç°æ–‡æœ¬ï¼Ÿ\né»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå…³è”çš„ç½‘é¡µå­—ä½“å°šæœªåŠ è½½ï¼ŒåŸºäº Chromium å’Œ Firefox çš„æµè§ˆå™¨å°†ä¼šé˜»æ­¢æ–‡æœ¬å‘ˆç°ï¼Œæœ€é•¿å¯æŒç»­3ç§’é’Ÿ; Safari å°†æ— é™æœŸåœ°é˜»æ­¢æ–‡æœ¬å‘ˆç°ã€‚\næ¦‚æ‹¬å°±æ˜¯æ–‡æœ¬ä¸å¯è§åœ¨å­—ä½“è¿˜æ²¡åŠ è½½å‰\nå¯ä»¥ä½¿ç”¨ font-display å±æ€§æ¥é…ç½®æ­¤è¡Œä¸ºã€‚\nfont-display font-display å±æ€§å†³å®šäº†ä¸€ä¸ª @font-face åœ¨ä¸åŒçš„ä¸‹è½½æ—¶é—´å’Œå¯ç”¨æ—¶é—´ä¸‹æ˜¯å¦‚ä½•å±•ç¤ºçš„.\nfont-display å¯é€‰å€¼ï¼š\nå€¼ å±è”½æœŸ äº¤æ¢æœŸ auto å› æµè§ˆå™¨è€Œå¼‚ å› æµè§ˆå™¨è€Œå¼‚ block 2-3 ç§’ æ— é™ swap 0 æ¯«ç§’ æ— é™ fallback 100 æ¯«ç§’ 3 ç§’ optional 100 æ¯«ç§’ æ—  å±è”½æœŸï¼šå±è”½æœŸä»æµè§ˆå™¨è¯·æ±‚ç½‘é¡µå­—ä½“æ—¶å¼€å§‹è®¡ç®—ã€‚åœ¨å±è”½æœŸé—´ï¼Œå¦‚æœç½‘é¡µå­—ä½“ä¸å¯ç”¨ï¼Œç›¸åº”å­—ä½“å°†ä»¥ä¸å¯è§çš„åå¤‡å­—ä½“å‘ˆç°ï¼Œå› æ­¤ç”¨æˆ·å°†çœ‹ä¸åˆ°ç›¸åº”æ–‡æœ¬ã€‚å¦‚æœåœ¨å±è”½æœŸç»“æŸåè¯¥å­—ä½“ä¸å¯ç”¨ï¼Œå®ƒå°†ä»¥åå¤‡å­—ä½“å‘ˆç°ã€‚ äº¤æ¢æœŸï¼šäº¤æ¢æœŸåœ¨å±è”½æœŸä¹‹åã€‚å¦‚æœç½‘é¡µå­—ä½“åœ¨äº¤æ¢æœŸå†…å¯ç”¨ï¼Œåˆ™ä¼šè¢«â€œäº¤æ¢â€ã€‚ å¦‚ä½•è®¾ç½®åˆç†çš„ font-display å¦‚æœæ€§èƒ½æ˜¯æˆ‘ä»¬çš„å¤´ç­‰å¤§äº‹ é‚£ä¹ˆä½¿ç”¨ font-display: optionalã€‚\nä¼˜ç‚¹: æ–‡æœ¬æ¸²æŸ“çš„å»¶è¿Ÿä¸è¶…è¿‡ 100 æ¯«ç§’, å¹¶ä¸”èƒ½å¤Ÿä¿è¯ä¸ä¼šå‘ç”Ÿä¸å­—ä½“äº¤æ¢ç›¸å…³çš„å¸ƒå±€åç§»(ä¼˜åŒ–CLS)\nç¼ºç‚¹: å¦‚æœç½‘é¡µå­—ä½“å»¶è¿Ÿæ˜¾ç¤ºï¼Œå°†æ— æ³•ä½¿ç”¨ç½‘é¡µå­—ä½“ã€‚\nå¿«é€Ÿæ˜¾ç¤ºæ–‡æœ¬æ˜¯é¦–è¦ä»»åŠ¡ï¼Œä»æƒ³ç¡®ä¿ä½¿ç”¨ç½‘é¡µå­—ä½“ ä½¿ç”¨ font-display: swap\nä¼˜ç‚¹: å…ˆä¼šä»¥é»˜è®¤å­—ä½“å±•ç¤ºï¼Œç­‰ç½‘é¡µå­—ä½“åŠ è½½å®Œæˆåï¼Œè¿›è¡Œäº¤æ¢ã€‚\nç¼ºç‚¹ï¼šä¼šå¯¼è‡´å¸ƒå±€åç§»ã€‚\næ€»ç»“: å°½æ—©åŠ è½½å­—ä½“ï¼Œä¾‹å¦‚ link preload è¿›è¡Œé¢„åŠ è½½ã€‚\nç¡®ä¿æ–‡æœ¬ä»¥ç½‘é¡µå­—ä½“æ˜¾ç¤ºæ˜¯é¦–è¦ä»»åŠ¡ ä½¿ç”¨ font-display: blockã€‚\nç¼ºç‚¹ï¼šå­—ä½“æ²¡åŠ è½½å®Œæ–‡æœ¬å°†ä¸å¯è§ã€‚\næ€»ç»“: å°½æ—©åŠ è½½å­—ä½“ï¼Œä¾‹å¦‚ link preload è¿›è¡Œé¢„åŠ è½½ã€‚\nå¯¹å­—ä½“ä¼˜åŒ–æ€»ç»“ å­—ä½“åŠ è½½æ—¶æœº é€šè¿‡ä¸Šé¢æ–‡ç« å¯ä»¥çŸ¥é“ åªæœ‰è¯»åˆ°ç½‘ç»œå­—ä½“è¢«ä½¿ç”¨æ—¶ï¼Œæ‰ä¼šè§¦å‘@font-faceä¸‹è½½é€»è¾‘ã€‚\nä¼˜åŒ–æ–¹æ¡ˆï¼š\nå…³é”®å­—ä½“é€šè¿‡ preload è¿›è¡ŒåŠ è½½ã€‚ å‰ææ¡ä»¶ï¼šå¦‚æœæ˜ç¡®å­—ä½“çš„æƒ…å†µä¸‹ã€‚ æ³¨æ„ç‚¹ï¼šå­—ä½“æ–‡ä»¶å¿…é¡»é€šè¿‡ CORS è¿æ¥ï¼Œé¢„åŠ è½½æƒ…å†µä¸‹ï¼Œpreload ä¼šå¿½ç•¥ unicode-range å£°æ˜ï¼Œå¦‚æœä½¿ç”¨å¾—å½“ï¼Œåº”ä»…ç”¨äºåŠ è½½ä¸€ç§å­—ä½“æ ¼å¼ã€‚ é¢„å…ˆè¿æ¥åˆ°å…³é”®çš„ç¬¬ä¸‰æ–¹æº link rel=\u0026quot;preconnect\u0026quot; å‰ææ¡ä»¶ï¼šå¯èƒ½å¤šä¸ªå­—ä½“ï¼Œä¸æ˜ç¡®å“ªä¸ªæ˜¯å…³é”®ï¼Œ æ³¨æ„ç‚¹ï¼šå­—ä½“æ–‡ä»¶å¿…é¡»é€šè¿‡ CORS è¿æ¥ å­—ä½“åŠ è½½é€Ÿåº¦ å­—ä½“åŠ è½½é€Ÿåº¦ä¸»è¦æ˜¯ç½‘ç»œä¼˜åŒ–ï¼Œä¸€ä¸ªæ˜¯å­—ä½“å¤§å°ä¸€ä¸ªæ˜¯åˆç†çš„ç½‘ç»œä¼ è¾“\né‡‡ç”¨ CDN æ‰˜ç®¡å­—ä½“å’Œ HTTP/2ã€‚ ä½¿ç”¨ WOFF2 ï¼ˆå¹¿æ³›çš„æµè§ˆå™¨æ”¯æŒï¼Œå¹¶æä¾›æœ€ä½³çš„å‹ç¼©æ•ˆæœï¼Œ WOFF2 ä½¿ç”¨ Brotliï¼Œå› æ­¤å…¶å‹ç¼©æ•ˆæœæ¯” WOFF é«˜ 30%ï¼‰ å­é›† é€šè¿‡ä½¿ç”¨ unicode-range ä¼šå‘ŠçŸ¥æµè§ˆå™¨æŸç§å­—ä½“å¯ç”¨äºå“ªäº›å­—ç¬¦, å°†ä¸€ä¸ªå¤§çš„å­—ä½“åˆ†æˆå‡ ä¸ªå­é›†ï¼Œéœ€è¦æ—¶åŠ è½½å­é›†ä»è€Œå‡å°ä½“ç§¯ è¡¥å…… ä¸ºä»€ä¹ˆ å­—ä½“çš„é¢„åŠ è½½éœ€è¦é€šè¿‡ CORS è¿æ¥ï¼Ÿ todo\n","permalink":"https://dummyEkko.github.io/posts/tech/%E5%AD%97%E4%BD%93%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/","summary":"å­—ä½“åŠ è½½ @font-face @font-face ç”¨æ¥ç”³æ˜ç½‘ç»œå­—ä½“ï¼Œå®ƒè‡³å°‘è¦å£°æ˜å°†ç”¨äºå¼•ç”¨å­—ä½“çš„åç§°ï¼Œå¹¶æŒ‡æ˜ç›¸åº”å­—ä½“æ–‡ä»¶çš„ä½ç½®ã€‚ @font-face { font-family: \u0026#34;Open Sans\u0026#34;; src: url(\u0026#34;/fonts/OpenSans-Regular-webfont.woff2\u0026#34;) format(\u0026#34;woff2\u0026#34;); } h1 { /* è¿™ä¸ªæ—¶å€™æ‰ä¼šå»ä¸‹è½½ font-face å£°æ˜çš„å­—ä½“ */ font-family: \u0026#34;Open Sans\u0026#34; } @font-face å£°æ˜æœ¬èº«ä¸ä¼šè§¦å‘å­—ä½“ä¸‹è½½, åªæœ‰é€šè¿‡åœ¨ç½‘é¡µä¸Šä½¿ç”¨çš„æ ·å¼å¼•ç”¨æŸä¸ªå­—ä½“æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šä¸‹è½½è¯¥å­—ä½“ unicode-range ä½¿ç”¨ä»‹ç»ï¼š todo å­—ä½“æ¸²æŸ“ å½“é¢ä¸´å°šæœªåŠ è½½çš„","title":"å­—ä½“æœ€ä½³å®è·µ"},{"content":" Sulv\u0026#39;s Blog ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾æ ¼å¼ åç§°ï¼š Sulv\u0026rsquo;s Blog ç½‘å€ï¼š https://www.sulvblog.cn å›¾æ ‡ï¼š https://www.sulvblog.cn/img/Q.gif æè¿°ï¼š ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾ç”³è¯·è¦æ±‚ ç§‰æ‰¿äº’æ¢å‹é“¾åŸåˆ™ã€æ–‡ç« å®šæœŸæ›´æ–°ã€ä¸èƒ½æœ‰å¤ªå¤šå¹¿å‘Šã€ä¸ªäººæè¿°å­—æ•°æ§åˆ¶åœ¨15å­—å†…\nğŸ‘‰Hugoåšå®¢äº¤æµç¾¤ 787018782\n","permalink":"https://dummyEkko.github.io/links/","summary":"Sulv\u0026#39;s Blog ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾æ ¼å¼ åç§°ï¼š Sulv\u0026rsquo;s Blog ç½‘å€ï¼š https://www.sulvblog.cn å›¾æ ‡ï¼š https://www.sulvblog.cn/img/Q.gif æè¿°ï¼š ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾ç”³è¯·è¦æ±‚ ç§‰æ‰¿äº’æ¢å‹é“¾åŸåˆ™ã€æ–‡ç« å®šæœŸæ›´æ–°ã€ä¸èƒ½æœ‰å¤ªå¤šå¹¿å‘Šã€ä¸ªäººæè¿°å­—æ•°æ§åˆ¶åœ¨15å­—å†… ğŸ‘‰Hugoåšå®¢äº¤æµç¾¤ 787018782","title":"ğŸ¤å‹é“¾"},{"content":"","permalink":"https://dummyEkko.github.io/about/","summary":"","title":"ğŸ™‹ğŸ»â€â™‚ï¸å…³äº"}]